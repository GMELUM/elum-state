"use strict";var e=require("react");const t={s:new Map,em:((e=new Map)=>({on:(t,s,u=e.get(t))=>u?u.push(s):e.set(t,[s]),off:(t,s,u=e.get(t))=>u&&s?u.splice(u.indexOf(s)>>>0,1):e.set(t,[]),emit:(t,s,u=e.get(t))=>u&&u.slice().map((e=>e(s)))}))()},s=t=>{const[s,u]=e.useState(t.get());return e.useLayoutEffect((()=>t.sub(u)),[]),s},u=e=>e.get(),o=e=>t=>e.set(t),a=t=>{const s=e.useRef(t.get());return e.useLayoutEffect((()=>t.sub((e=>{s.current=e}))),[]),s},r=e=>({key:e.key,default:e.default,get:()=>t.s.get(e.key)??e.default,set:s=>{t.s.set(e.key,s),t.em.emit(e.key,s)},sub:s=>(t.em.on(e.key,s),()=>t.em.off(e.key,s))}),l=u,f=(e,t)=>{"function"==typeof t?e.set(t(u(e))):e.set(t)},n=s,p=o,c=e=>[s(e),o(e)],b=e=>[a(e),o(e)],y=a;exports.atom=r,exports.getter=l,exports.setter=f,exports.useGlobalState=c,exports.useGlobalValue=n,exports.useSetGlobalState=p,exports.useUnSubGlobalState=b,exports.useUnSubGlobalValue=y;
