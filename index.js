"use strict";var e=require("react");const t={s:new Map,em:((e=new Map)=>({on:(t,s,u=e.get(t))=>u?u.push(s):e.set(t,[s]),off:(t,s,u=e.get(t))=>u&&s?u.splice(u.indexOf(s)>>>0,1):e.set(t,[]),emit:(t,s,u=e.get(t))=>u&&u.slice().map((e=>e(s)))}))()},s=t=>{const[s,u]=e.useState(t.get());return e.useLayoutEffect((()=>t.sub(u)),[]),s},u=e=>e.get(),o=(e,t)=>{"function"==typeof t?e.set(t(u(e))):e.set(t)},a=e=>t=>o(e,t),r=t=>{const s=e.useRef(t.get());return e.useLayoutEffect((()=>t.sub((e=>{s.current=e}))),[]),s},l=e=>({key:e.key,default:e.default,get:()=>t.s.get(e.key)??e.default,set:s=>{t.s.set(e.key,s),t.em.emit(e.key,s)},sub:s=>(t.em.on(e.key,s),()=>t.em.off(e.key,s))}),f=u,n=o,p=s,c=a,b=e=>[s(e),a(e)],y=e=>[r(e),a(e)],g=r;exports.atom=l,exports.getter=f,exports.setter=n,exports.useGlobalState=b,exports.useGlobalValue=p,exports.useSetGlobalState=c,exports.useUnSubGlobalState=y,exports.useUnSubGlobalValue=g;
