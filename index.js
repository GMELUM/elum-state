"use strict";var e=require("react");const t={map:new Map,events:((e=new Map)=>({on:(t,s,o=e.get(t))=>o?o.push(s):e.set(t,[s]),off:(t,s,o=e.get(t))=>o&&s?o.splice(o.indexOf(s)>>>0,1):e.set(t,[]),emit:(t,s,o=e.get(t))=>{if(o)for(const e of o)e(s)}}))()},s=e=>e.get(),o=(e,t)=>e.set("function"==typeof t?t(s(e)):t),a=t=>{const[o,a]=e.useState(s(t));return e.useLayoutEffect((()=>t.sub(a)),[]),o};exports.atom=e=>({key:e.key,default:e.default,get:()=>t.map.get(e.key)??e.default,set:s=>{t.map.set(e.key,s),t.events.emit(e.key,s)},sub:s=>(t.events.on(e.key,s),()=>t.events.off(e.key,s))}),exports.getter=s,exports.setter=o,exports.useGlobalState=e=>[a(e),t=>o(e,t)],exports.useGlobalValue=a;
