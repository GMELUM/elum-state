import{useState as e,useLayoutEffect as t,useRef as s}from"react";const n={s:new Map,em:((e=new Map)=>({on:(t,s,n=e.get(t))=>n?n.push(s):e.set(t,[s]),off:(t,s,n=e.get(t))=>n&&s?n.splice(n.indexOf(s)>>>0,1):e.set(t,[]),emit:(t,s,n=e.get(t))=>n&&n.slice().map((e=>e(s)))}))()},o=s=>{const[n,o]=e(s.get());return t((()=>s.sub(o)),[]),n},f=e=>e.get(),u=e=>t=>e.set(t),r=e=>{const n=s(e.get());return t((()=>e.sub((e=>{n.current=e}))),[]),n},m=e=>({key:e.key,default:e.default,get:()=>n.s.get(e.key)??e.default,set:t=>{n.s.set(e.key,t),n.em.emit(e.key,t)},sub:t=>(n.em.on(e.key,t),()=>n.em.off(e.key,t))}),c=f,g=(e,t)=>{"function"==typeof t?e.set(t(f(e))):e.set(t)},p=o,y=u,a=e=>[o(e),u(e)],i=e=>[r(e),u(e)],k=r;export{m as atom,c as getter,g as setter,a as useGlobalState,p as useGlobalValue,y as useSetGlobalState,i as useUnSubGlobalState,k as useUnSubGlobalValue};
