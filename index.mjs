import{useState as e,useLayoutEffect as t}from"react";const s={map:new Map,events:((e=new Map)=>({on:(t,s,n=e.get(t))=>n?n.push(s):e.set(t,[s]),off:(t,s,n=e.get(t))=>n&&s?n.splice(n.indexOf(s)>>>0,1):e.set(t,[]),emit:(t,s,n=e.get(t))=>{if(n)for(const e of n)e(s)}}))()},n=e=>({key:e.key,default:e.default,get:()=>s.map.get(e.key)??e.default,set:t=>{s.map.set(e.key,t),s.events.emit(e.key,t)},sub:t=>(s.events.on(e.key,t),()=>s.events.off(e.key,t))}),f=e=>e.get(),o=(e,t)=>e.set("function"==typeof t?t(f(e)):t),p=s=>{const[n,o]=e(f(s));return t((()=>s.sub(o)),[]),n},a=e=>t=>o(e,t),u=e=>[p(e),a(e)];export{n as atom,f as getter,o as setter,u as useGlobalState,p as useGlobalValue,a as useSetGlobalState};
