import{useState as e,useLayoutEffect as t,useRef as s}from"react";const n={s:new Map,em:((e=new Map)=>({on:(t,s,n=e.get(t))=>n?n.push(s):e.set(t,[s]),off:(t,s,n=e.get(t))=>n&&s?n.splice(n.indexOf(s)>>>0,1):e.set(t,[]),emit:(t,s,n=e.get(t))=>n&&n.slice().map((e=>e(s)))}))()},o=s=>{const[n,o]=e(s.get());return t((()=>s.sub(o)),[]),n},f=e=>e.get(),u=(e,t)=>{"function"==typeof t?e.set(t(f(e))):e.set(t)},r=e=>t=>u(e,t),m=e=>{const n=s(e.get());return t((()=>e.sub((e=>{n.current=e}))),[]),n},c=e=>({key:e.key,default:e.default,get:()=>n.s.get(e.key)??e.default,set:t=>{n.s.set(e.key,t),n.em.emit(e.key,t)},sub:t=>(n.em.on(e.key,t),()=>n.em.off(e.key,t))}),g=f,p=u,y=o,a=r,i=e=>[o(e),r(e)],k=e=>[m(e),r(e)],l=m;export{c as atom,g as getter,p as setter,i as useGlobalState,y as useGlobalValue,a as useSetGlobalState,k as useUnSubGlobalState,l as useUnSubGlobalValue};
