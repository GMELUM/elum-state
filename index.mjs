import{useState as e,useLayoutEffect as t}from"react";const n=(e=new Map)=>({on:(t,n,s=e.get(t))=>s?s.push(n):e.set(t,[n]),off:(t,n,s=e.get(t))=>s&&n?s.splice(s.indexOf(n)>>>0,1):e.set(t,[]),emit:(t,n,s=e.get(t))=>{if(!s){return}for(const e of s){e(n)}}}),s={map:new Map,events:n()},f=e=>({key:e.key,default:e.default,get:()=>s.map.get(e.key)??e.default,set:t=>{s.map.set(e.key,t);s.events.emit(e.key,t)},sub:t=>{s.events.on(e.key,t);return()=>s.events.off(e.key,t)}}),o=e=>e.get(),r=(e,t)=>e.set(typeof t==="function"?t(o(e)):t),p=n=>{const[s,f]=e(o(n));t((()=>n.sub(f)),[]);return s},u=e=>[p(e),t=>r(e,t)];export{f as atom,o as getter,r as setter,u as useGlobalState,p as useGlobalValue};
