import{createSignal as e,onMount as t,onCleanup as o}from"solid-js";import{createStore as s}from"solid-js/store";const f={m:new Map,e:((e=new Map)=>({on:(t,o,s=e.get(t))=>s?s.push(o):e.set(t,[o]),off:(t,o,s=e.get(t))=>s&&o?s.splice(s.indexOf(o)>>>0,1):e.set(t,[]),emit:(t,o,s=e.get(t)||[])=>{for(const e of s)e(o)}}))()},n=e=>[e.key,e.default,()=>f.m.get(e.key)??e.default,t=>{f.m.set(e.key,t),f.e.emit(e.key,t)},t=>{f.e.on(e.key,t)},t=>{f.e.off(e.key,t)}],r=e=>e[2](),i=(e,t)=>e[3]("function"==typeof t?t(r(e)):t),m=s=>{const f=e(r(s));return t((()=>{s[4](f[1])})),o((()=>{s[5](f[1])})),f},p=e=>{const f=s(r(e));return t((()=>{e[4](f[1])})),o((()=>{e[5](f[1])})),f};export{n as atom,r as getter,m as globalSignal,p as globalStore,i as setter};
