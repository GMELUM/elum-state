import{createSignal as e,onMount as t,onCleanup as s}from"solid-js";import{createStore as o}from"solid-js/store";const f={m:new Map,e:((e=new Map)=>({on:(t,s,o=e.get(t))=>o?o.push(s):e.set(t,[s]),off:(t,s,o=e.get(t))=>o&&s?o.splice(o.indexOf(s)>>>0,1):e.set(t,[]),emit:(t,s,o=e.get(t)||[])=>{for(const e of o)e(s)}}))()},n=e=>({k:e.key,d:e.default,g:()=>f.m.get(e.key)??e.default,s:t=>{f.m.set(e.key,t),f.e.emit(e.key,t)},sb:t=>{f.e.on(e.key,t)},usb:t=>{f.e.off(e.key,t)}}),r=e=>e.g(),i=(e,t)=>e.s("function"==typeof t?t(r(e)):t),m=o=>{const f=e(r(o));return t((()=>{o.sb(f[1])})),s((()=>{o.usb(f[1])})),f},u=e=>{const f=o(r(e));return t((()=>{e.sb(f[1])})),s((()=>{e.usb(f[1])})),f};export{n as atom,r as getter,m as globalSignal,u as globalStore,i as setter};
